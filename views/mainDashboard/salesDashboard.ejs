<h6> Welcome, name </h6>

   
   <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
          <h1> Dashboard</h1>
          




<!-- Button trigger modal -->
<button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#mtgModal">
  + Add Lead</button>

<!-- Modal -->
<div class="modal fade" id="mtgModal" tabindex="-1" aria-labelledby="mtgModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="mtgModalLabel">Add a new Borrower</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <form action="/borrowersMtg" method="POST">

          <div class="col-8">
            <label for="firstName" class="form-label">First Name</label>
            <input required value="<%= borrowermtgs.firstName %>" type="text" name="firstName" id="firstName" class="form-control">
            <label for="lastName" class="form-label">Last Name</label>
            <input required value="<%= borrowermtgs.lastName %>" type="text" name="lastName" class="form-control" id="lastName" >
          </div>
          <div class="col-8">
            <label for="phoneNumber" class="form-label">Phone Number</label>
            <input value="<%= borrowermtgs.phoneNumber %>" type="text" name="phoneNumber" id="phoneNumber" class="form-control">
            <label for="email" class="form-label">Email</label>
            <input value="<%= borrowermtgs.email %>" type="text" name="email" id="email" class="form-control">
          </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>

      </div>

    </div>
  </div>
</div>

</div>


<!-- End of Modal -->




        <div class="table-responsive">
          <table class="table table-striped table-sm">
            <thead>
              <tr>
                <th>Status</th>
                <th>Borrower</th>
                <th>Lender</th>
                <th>Loan #</th>
                <th>Init. Docs Signed</th>
                <th>CD Signed</th>
                <th>Referral Source</th>
                <th>Edit</th>
                <th>Enter</th>
  
              </tr>
            </thead>



            <tbody>
              <% borrowermtgs.forEach((borrowerMtg, index) => { %>
                <tr>
                    <td><span class="status completed"><%= borrowerMtg.loanStatus %></span></td>
                    <td><strong><p class="card-title"> <%= borrowerMtg.firstName %> <%= borrowerMtg.lastName %></p></strong>
                    </td>
                    <td><%= borrowerMtg.lender %></td>
                    <td><p><%= borrowerMtg.loanNumber %></p></td>
                    
                    <td>08/16/2023</td>
                    <td>08/31/2023</td>
                    <td><%= borrowerMtg.referral %></td>
                    <td>    
                   <!-- Button trigger modal -->
                   <button type="button" class="btn btn-warning edit-button" data-bs-toggle="modal" data-bs-target="#editModal" data-item-id="<%= borrowerMtg.id %>">
                    Edit</button>
           
<!-- Modal -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title fs-5" id="mtgModalLabel">Edit</h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

     <div class="modal-body">
                        <form action="/borrowersMtg/<%= borrowerMtg.id %>" method="POST">
                  
                          <div class="table-responsive">
                              <table class="table table-striped table-sm">
                                <thead>
                                  <tr>
                                    <th>Status</th>
                                    <th>Borrower</th>
                                    <th>Lender</th>
                                    <th>Loan #</th>
                                    <th>Init. Docs Signed</th>
                                    <th>CD Signed</th>
                                    <th>Referral Source</th>
                                  </tr>
                                </thead>
                          
                                <tbody>
                                  <tr>
                                      <td><span class="status completed"><%= borrowerMtg.loanStatus %></span></td>
                                      <td><h4 class="card-title"> <%= borrowerMtg.firstName %> <%= borrowerMtg.lastName %></h4> </td>
                                      <td><%= borrowerMtg.lender %></td>
                                      <td><p><%= borrowerMtg.loanNumber %></p></td>
                                      <td>08/16/2023</td>
                                      <td>08/31/2023</td>
                                      <td><%= borrowerMtg.referral %></td>
                             
                                  </tr>
                                </tbody>
                            </table>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>

      </div>

    </div>
  </div>
</div>

</div>

<!-- End of Modal -->
                  </td>
                  
                  <td> <a href="borrowersMtg/<%= borrowerMtg.id %>" class="btn btn-primary">Enter</a></td>     
                </tr>
              </tbody>
              <% }) %>
          </table>
        </div>
      </main>


    </div>






<script>
  document.querySelectorAll('.edit-button').forEach(button => {
  button.addEventListener('click', function() {
    const itemId = this.getAttribute('data-item-id');
    // Fetch the data for the specific item using the itemId and populate the modal
    // You can use AJAX requests or other data retrieval methods here.
  });
});

</script>






